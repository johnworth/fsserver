# fsserver

A simple HTTP service that allows clients to browse directories, download files (all at once or by byte range), and register web callbacks on files. When a file or directory is changed, a JSON body summarizing the change is POSTed to the callback URLs associated with the path. fsserver uses the experimental fsnotify library for Go and should also be considered experimental as a result.

## Building

Install Go 1.3 or later and do the following from a check out of fsserver:

    go build .

The unit tests can be run with:

    go test .

## Running fsserver

fsserver has two options __--port__ and __--path__. __--path__ is required while __--port__ has a default value of 8080. fsserver prepends a ":" to the front of the port if one is not provided.

Example:

    ./fsserver --path /tmp --port 80

## API

### Callbacks

To associate a callback with a path:

    POST /callbacks/

The body of the request should look something like this:

```json
{
  "Path" : "example",
  "URL" : "http://localhost:8081/"
}
```

The JSON POSTed to the callback URL will look similar to the following:

```json
{
  "Path":"example",
  "Event":"Attrib"
}
```
Here are the valid events:
* Attrib
* Create
* Delete
* Modify
* Unknown

More information will be added to the callback JSON in the future.

Here's a curl command as an example:

    curl -d '{"Path":"example","URL":"http://localhost:8081"}' http://localhost:8080/callbacks/

### File browsing/downloading

To browse a directory:

    GET /files/example/

The result will be an HTML document generated by Go's http.FileServer.

To download a file entirely:

    GET /files/example/filename.txt

Thanks to Go's http.FileServer, you can download a chunk of a file by specifying a byte range. Here's a curl command as an example:

    curl -H "Range: bytes=0-100" http://localhost:8080/files/example/filename.txt




